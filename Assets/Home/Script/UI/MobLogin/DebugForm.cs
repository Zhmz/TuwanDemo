using System.Collections;
using System.Collections.Generic;
using System.Linq;
using FishNet.Managing.Object;
using GameFramework.Event;
using Tuwan;
using Tuwan.Const;
using UnityEngine;
using UnityEngine.UI;

public class DebugForm : UGuiForm
{
    public GameObject DebugItem = null;
    public GameObject Layout = null;
    protected override void OnInit(object userData)
    {
        base.OnInit(userData);
        string[] cookieList = {
            "Tuwan_Passport=BEC2D2E86149D195F5EA2DC643CD529971CC825288C330AC40337E58B8B35B8B0D22BE06DB32022C3C13843679F24C4480B23DCD37E67E275830F73C157D438F37B7024F6E5FDA9670AE412F556D9E8C54BC396C34D4526F",
            "Tuwan_Passport=01AA911FE92E06DA7A019D5F060107B627CA138FB9261FDB0B10DCC89BBEBC3FE02CABF62BAB9ADDD11C5D7F0A071E50FC41D081D0955F83B3B78DBC120AE6E6CDA759A0B09A23F52CCFC9E6CE5D4B9AEFCB7E0AA63D7D487A21601DDF5A8131FEE321C17C3BB6A0",
            "Tuwan_Passport=6A0C16B55A1BD05461C05B3F3353E5B8E16A6AE3696F79BED81F964DD92F7C8BC465B2E9116DD91C1AEB5EFACFDD71E029C012DC895299B3E9AEFACD26AF3C531F8B11DC409D34A3A73631AFAFCF58B4",
            "Tuwan_Passport=8BA5D0D1809C67E36B9E6B077F7B01F4041CD524D5220398B697E0F2A46A150404D1DE582EE61CEB188EC91CE20BB20FDA0D5D027B96C5D5AF9C0C643AFACCC5371FAA17A1AB8F3F25C59E265D1C64B734E4F1BEB8B4486173EBDE018540ACA6",
            "Tuwan_Passport=6A0C16B55A1BD05461C05B3F3353E5B8E16A6AE3696F79BED81F964DD92F7C8BC465B2E9116DD91C1AEB5EFACFDD71E029C012DC895299B3E9AEFACD26AF3C53848FE3460B78F0E338D650FA8ECEDECFF1ACD2C842DCA69E1A8A5690B4199F877215CB4AC14572CE40CBDA86D176F7F1",
            "Tuwan_Passport=CF5021C9770328C9E7B38B4EADC6953474489E8E0BB84CEBB1905CA63BE2769E0D09EA4BBAE69D73E02AED19FC05D073BF2B69A80D6C1F37189E1178443A8B26AED772B24B2EC72BBC6D05C4D329B1215CBD77088F3E4DB5",
            "Tuwan_Passport=0EF90CE23B07C98F5F8F0CF59772601CD830B0CE2449C7D35033B61AF22DAFAF0ECAB86A90F383CCCD7BDB3422FFC57E55B65A5810FBF6921182BD05704C1EC80599A29DCC962DBB1FC229F77B3BEEDF284A0CC3F168394B",
            "Tuwan_Passport=3AED5D31CB4F38E5957B13EE52C2BAABE01AF59E011FCD1B4DDD736B63EEA6518F253534CE147F07E3109C29706FF37A864358C1CF5EFE5801443F15875A5D92C533A484425D73F4C7497EEBBBE7890F38F29E9E4A8AF59B",
            "Tuwan_Passport=0643EB52CFBC14D4398055573EF7357EBE952E0F3A34AE811D560EA14735064DE3B39D99E29CA4E32140AE6985DABDE2B9C7384ABAF6134E36B5CF755E49A76D",
            "Tuwan_Passport=0A0F0FF4913A72862EEE028864FCBB7E96D8B3E54622EB87D60A8A2C23DE1D0E4313E17C5D821298687192AAF93237D8844ED9949F2FFC2608F4F5035AEC7EBF9064FD0DAB695EEFEE299048E48C8CD687267F0B4595BD07",
            "Tuwan_Passport=59D52861688AD406B6030AD2FA902056D7ECB23061B990D93869D48A00D6C0C52E4348AFBCC187121E84EFE52B116F8FA6027E34643389BD6EBBD1D7BE0DC380E976A80F5D80F6AECF4B9A4D9993029C9F1A7A84BFC78DBA",
            "Tuwan_Passport=FE8B06CDB5B0DE2562C14BC73EABE12B872CC3C5661E6E82A76A35F3307D4DA851F316304470B401E811A450BA97CE1725BFA484E7F83F75CF4DC6823A441E5B751981760B6DC26E17E3BC2222323EA729F61B256490282A",
            "Tuwan_Passport=6A0C16B55A1BD05461C05B3F3353E5B8E16A6AE3696F79BED81F964DD92F7C8BC465B2E9116DD91C1AEB5EFACFDD71E029C012DC895299B3E9AEFACD26AF3C531F8B11DC409D34A3A73631AFAFCF58B4",
          };
        ToggleGroup toggleGroup = Layout.GetComponent<ToggleGroup>();
        for (int i = 0; i < cookieList.Length; i++)
        {
            GameObject obj = Instantiate(DebugItem);
            Toggle toggle = obj.GetComponent<Toggle>();
            DebugItem item = obj.GetComponent<DebugItem>();
            item.Init(i.ToString(), cookieList[i]);
            toggle.group = toggleGroup;
            obj.transform.parent = Layout.transform;
        }

    }
    protected override void OnOpen(object userData)
    {
        base.OnOpen(userData);
    }
    protected override void OnClose(bool isShutdown, object userData)
    {

        base.OnClose(isShutdown, userData);
    }
    public void ClickClose()
    {
        ToggleGroup toggleGroup = Layout.GetComponent<ToggleGroup>();
        Toggle selectedToggle = toggleGroup.ActiveToggles().FirstOrDefault();
        if (selectedToggle != null)
        {
            DebugItem item = selectedToggle.GetComponent<DebugItem>();
            Debug.Log("Selected Toggle: " + item.Cookie);
            EventCenter.inst.EventTrigger((int)UIEventTag.EVENT_UI_DEBUG_TOGGLE_CHANGE, item.Cookie);
        }
        else
        {
            Debug.Log("No Toggle selected.");
        }
        Close();
    }



}
